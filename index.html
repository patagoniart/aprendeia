<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AprendeIA - Patagon.iart</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a0a;
        }
        .atom-container {
            position: relative;
            width: 200px;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .nucleus {
            width: 40px;
            height: 40px;
            background: radial-gradient(circle, #a78bfa, #6d28d9);
            border-radius: 50%;
            box-shadow: 0 0 20px #a78bfa, 0 0 40px #6d28d9;
            position: absolute;
        }
        .orbit {
            position: absolute;
            width: 180px;
            height: 180px;
            border: 2px solid rgba(167, 139, 250, 0.3);
            border-radius: 50%;
            animation: rotate 1.5s linear infinite;
        }
        .orbit:nth-child(2) {
            width: 140px;
            height: 140px;
            transform: rotateY(60deg) rotateX(20deg);
            animation: rotate-reverse 2s linear infinite;
        }
        .orbit:nth-child(3) {
            width: 100px;
            height: 100px;
            transform: rotateY(-60deg) rotateX(-20deg);
            animation: rotate 2.5s linear infinite;
        }
        .electron {
            width: 10px;
            height: 10px;
            background-color: #c4b5fd;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: -5px;
            transform-origin: 90px 0;
            box-shadow: 0 0 10px #c4b5fd;
        }
        .orbit:nth-child(2) .electron { transform-origin: 70px 0; }
        .orbit:nth-child(3) .electron { transform-origin: 50px 0; }
        @keyframes rotate {
            from { transform: rotateZ(0deg) rotateY(0deg); }
            to { transform: rotateZ(360deg) rotateY(360deg); }
        }
        @keyframes rotate-reverse {
            from { transform: rotateZ(360deg) rotateY(60deg) rotateX(20deg); }
            to { transform: rotateZ(0deg) rotateY(60deg) rotateX(20deg); }
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
        input[type="radio"]:checked + label {
            background-color: #8b5cf6;
            color: white;
            border-color: #a78bfa;
        }
    </style>
</head>
<body class="bg-gray-900 text-white flex flex-col items-center justify-start min-h-screen p-4">

    <div class="w-full max-w-2xl mx-auto text-center">
        <header class="my-8">
            <h1 class="text-4xl font-black text-violet-400 tracking-wider">Patagon.iart</h1>
            <h2 class="text-2xl font-bold text-gray-300 mt-1">AprendeIA</h2>
        </header>

        <div class="mb-8">
            <p class="text-gray-400 mb-4">Sigue a Patagon.iart en redes sociales</p>
            <div class="flex justify-center items-center space-x-6">
                <a href="https://www.instagram.com/patagon.iart" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-violet-400 transform hover:scale-110 transition-all duration-300" title="Instagram">
                    <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12.315 2c-4.068 0-5.158.016-6.945.097C3.69 2.18 2.18 3.69 2.097 5.37C2.016 7.158 2 8.248 2 12.315c0 4.068.016 5.158.097 6.945.083 1.68.59 3.19 2.18 3.273 1.787.081 2.877.097 6.945.097s5.158-.016 6.945-.097c1.68-.083 3.19-.59 3.273-2.18 0-1.787.097-2.877.097-6.945s-.016-5.158-.097-6.945C21.82 3.69 20.31 2.18 18.63 2.097 16.842 2.016 15.752 2 12.315 2zm0 1.956c3.973 0 4.99.015 6.745.092 1.45.066 2.3.43 2.8.93.5.5.864 1.35.93 2.8.077 1.755.092 2.772.092 6.745s-.015 4.99-.092 6.745c-.066 1.45-.43 2.3-.93 2.8-.5.5-1.35.864-2.8.93-1.755.077-2.772.092-6.745.092s-4.99-.015-6.745-.092c-1.45-.066-2.3-.43-2.8-.93-.5-.5-.864-1.35-.93-2.8C3.97 17.305 3.955 16.288 3.955 12.315s.015-4.99.092-6.745c.066-1.45.43-2.3.93-2.8.5-.5 1.35-.864 2.8-.93C7.325 3.97 8.342 3.956 12.315 3.956zM12.315 7.18a5.135 5.135 0 100 10.27 5.135 5.135 0 000-10.27zm0 8.315a3.18 3.18 0 110-6.36 3.18 3.18 0 010 6.36zm5.222-8.91a1.215 1.215 0 100-2.43 1.215 1.215 0 000 2.43z" clip-rule="evenodd" /></svg>
                </a>
                <a href="https://www.facebook.com/profile.php?id=61572922405043" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-violet-400 transform hover:scale-110 transition-all duration-300" title="Facebook">
                    <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd" /></svg>
                </a>
                <a href="https://www.tiktok.com/@patagon.iart" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-violet-400 transform hover:scale-110 transition-all duration-300" title="TikTok">
                    <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M12.525.02c1.31-.02 2.61-.01 3.91.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.04-5.36-.01-4.03-.01-8.05.02-12.07z"/></svg>
                </a>
                <a href="https://www.youtube.com/@patagon-iart" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-violet-400 transform hover:scale-110 transition-all duration-300" title="YouTube">
                    <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M19.812 5.418c.861.23 1.538.907 1.768 1.768C21.998 8.78 22 12 22 12s0 3.22-.42 4.814a2.506 2.506 0 0 1-1.768 1.768C18.343 19 12 19 12 19s-6.343 0-7.812-1.418a2.506 2.506 0 0 1-1.768-1.768C2 15.22 2 12 2 12s0-3.22.42-4.814a2.506 2.506 0 0 1 1.768-1.768C5.658 5 12 5 12 5s6.343 0 7.812.418zM9.545 15.568V8.432L15.818 12 9.545 15.568z" clip-rule="evenodd" /></svg>
                </a>
            </div>
        </div>

        <main class="w-full bg-gray-800/50 backdrop-blur-sm rounded-2xl p-6 md:p-8 shadow-2xl border border-violet-500/20">
            <!-- 1. Selección de Contexto -->
            <div class="mb-6">
                <label for="contexto" class="block text-lg font-semibold mb-2 text-violet-300">1. ¿Dónde quieres aplicar la IA?</label>
                <select id="contexto" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-violet-500 focus:outline-none transition">
                    <option value="vida-diaria">Vida Diaria</option>
                    <option value="trabajo">Trabajo</option>
                    <option value="estudiante">Estudiante</option>
                </select>
            </div>

            <!-- Campos Opcionales para Trabajo -->
            <div id="trabajo-fields" class="hidden space-y-4 mb-6 text-left">
                <div>
                    <label for="rubro" class="block text-md font-medium mb-2 text-violet-300">¿Cuál es tu rubro o industria? (Opcional)</label>
                    <input type="text" id="rubro" placeholder="Ej: Marketing, Programación, Educación" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg placeholder-gray-400 focus:ring-2 focus:ring-violet-500 focus:outline-none transition">
                </div>
                <div>
                    <label for="puesto" class="block text-md font-medium mb-2 text-violet-300">¿Cuál es tu puesto o rol? (Opcional)</label>
                    <input type="text" id="puesto" placeholder="Ej: Redactor, Desarrollador, Docente" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg placeholder-gray-400 focus:ring-2 focus:ring-violet-500 focus:outline-none transition">
                </div>
            </div>

            <!-- Campos Opcionales para Estudiante -->
            <div id="estudiante-fields" class="hidden space-y-4 mb-6 text-left">
                <div>
                    <label for="nivel" class="block text-md font-medium mb-2 text-violet-300">¿Cuál es tu nivel? (Opcional)</label>
                    <select id="nivel" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-violet-500 focus:outline-none transition">
                        <option value="">Cualquier nivel</option>
                        <option value="primario">Primario</option>
                        <option value="secundario">Secundario</option>
                        <option value="terciario">Terciario</option>
                        <option value="universitario">Universitario</option>
                    </select>
                </div>
                <div>
                    <label for="materia" class="block text-md font-medium mb-2 text-violet-300">¿Qué carrera o materia estudias? (Opcional)</label>
                    <input type="text" id="materia" placeholder="Ej: Historia, Matemáticas, Ingeniería de Software" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg placeholder-gray-400 focus:ring-2 focus:ring-violet-500 focus:outline-none transition">
                </div>
            </div>
            
            <!-- 2. Selección de Chatbot -->
            <div class="mb-6">
                 <label class="block text-lg font-semibold mb-3 text-violet-300">Elije tu chatbot preferido</label>
                 <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3">
                     <div>
                         <input type="radio" name="chatbot" value="chatgpt" id="radio-chatgpt" class="sr-only" checked>
                         <label for="radio-chatgpt" class="block w-full p-3 bg-gray-700 border border-gray-600 rounded-lg cursor-pointer text-center font-medium transition hover:border-violet-500">ChatGPT</label>
                     </div>
                     <div>
                         <input type="radio" name="chatbot" value="gemini" id="radio-gemini" class="sr-only">
                         <label for="radio-gemini" class="block w-full p-3 bg-gray-700 border border-gray-600 rounded-lg cursor-pointer text-center font-medium transition hover:border-violet-500">Gemini</label>
                     </div>
                     <div>
                         <input type="radio" name="chatbot" value="perplexity" id="radio-perplexity" class="sr-only">
                         <label for="radio-perplexity" class="block w-full p-3 bg-gray-700 border border-gray-600 rounded-lg cursor-pointer text-center font-medium transition hover:border-violet-500">Perplexity</label>
                     </div>
                     <div>
                         <input type="radio" name="chatbot" value="claude" id="radio-claude" class="sr-only">
                         <label for="radio-claude" class="block w-full p-3 bg-gray-700 border border-gray-600 rounded-lg cursor-pointer text-center font-medium transition hover:border-violet-500">Claude</label>
                     </div>
                     <div>
                         <input type="radio" name="chatbot" value="meta" id="radio-meta" class="sr-only">
                         <label for="radio-meta" class="block w-full p-3 bg-gray-700 border border-gray-600 rounded-lg cursor-pointer text-center font-medium transition hover:border-violet-500">Meta AI</label>
                     </div>
                 </div>
            </div>

            <div id="atom-container" class="atom-container mx-auto my-8 hidden">
                <div class="orbit"><div class="electron"></div></div>
                <div class="orbit"><div class="electron"></div></div>
                <div class="orbit"><div class="electron"></div></div>
                <div class="nucleus"></div>
            </div>

            <!-- 3. Botón Principal -->
            <div class="mt-8">
                <button id="generar-btn" class="w-full bg-violet-600 hover:bg-violet-700 text-white font-bold py-4 px-6 rounded-lg text-xl shadow-lg shadow-violet-500/20 hover:shadow-violet-500/40 transform hover:-translate-y-1 transition-all duration-300">
                    ✨ Generar idea con IA
                </button>
            </div>
            
            <!-- Contenedor del Resultado -->
            <div id="resultado-container" class="mt-8 p-6 bg-gray-900/50 rounded-2xl border border-violet-500/30 hidden text-left">
                 <h3 class="text-xl font-bold text-violet-300 mb-3">Tu sugerencia de IA personalizada:</h3>
                 <p id="resultado-texto" class="text-gray-200 text-lg mb-4"></p>
                 
                 <div id="prompt-container" class="mt-4">
                     <h4 class="text-md font-semibold text-violet-300 mb-2">Prompt de ejemplo (¡Copia y pega!):</h4>
                     <div class="relative bg-gray-900 rounded-lg p-4 pr-12 border border-gray-700">
                         <pre><code id="prompt-texto" class="text-gray-300 whitespace-pre-wrap text-sm"></code></pre>
                         <button id="copy-btn" title="Copiar prompt" class="absolute top-2 right-2 p-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-gray-300 transition">
                             <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/></svg>
                         </button>
                         <span id="copy-feedback" class="absolute top-2 right-2 p-2 rounded-lg text-white text-xs font-bold bg-green-500 hidden">¡Copiado!</span>
                     </div>
                 </div>

                 <a id="resultado-link" href="#" target="_blank" rel="noopener noreferrer" class="mt-6 inline-block bg-white/10 hover:bg-white/20 text-violet-300 font-semibold py-2 px-4 rounded-lg transition-colors">
                     Probar la herramienta &rarr;
                 </a>
            </div>
        </main>
    </div>

    <!-- Modal de Advertencia "Pillín" -->
    <div id="pillin-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 z-50 items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl p-6 md:p-8 w-full max-w-md text-center text-gray-800">
            <img src="https://pablorojasescobar.wordpress.com/wp-content/uploads/2011/04/gorgory.png" alt="Imagen del Jefe Gorgory" class="mx-auto mb-4 h-32 w-auto object-contain">
            <h2 class="text-3xl font-black text-red-600 mb-2">NO TE PASES DE LISTO PILLÍN</h2>
            <div class="w-full bg-gray-200 rounded-full my-4 h-4 overflow-hidden">
                <div id="pillin-progress-bar" class="bg-red-500 h-4 rounded-full transition-all duration-3000 ease-linear w-0"></div>
            </div>
            <p class="text-gray-600 mb-4">Enviando base de datos a la Polesea espere por favor...<br>mientras tanto siganos en nuestras Redes sociales, ¡muchas gracias!</p>
            
            <div class="flex justify-center items-center space-x-5 my-6">
                <a href="https://www.instagram.com/patagon.iart" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-red-500 transform hover:scale-110 transition-all duration-300" title="Instagram"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12.315 2c-4.068 0-5.158.016-6.945.097C3.69 2.18 2.18 3.69 2.097 5.37C2.016 7.158 2 8.248 2 12.315c0 4.068.016 5.158.097 6.945.083 1.68.59 3.19 2.18 3.273 1.787.081 2.877.097 6.945.097s5.158-.016 6.945-.097c1.68-.083 3.19-.59 3.273-2.18 0-1.787.097-2.877.097-6.945s-.016-5.158-.097-6.945C21.82 3.69 20.31 2.18 18.63 2.097 16.842 2.016 15.752 2 12.315 2zm0 1.956c3.973 0 4.99.015 6.745.092 1.45.066 2.3.43 2.8.93.5.5.864 1.35.93 2.8.077 1.755.092 2.772.092 6.745s-.015 4.99-.092 6.745c-.066 1.45-.43 2.3-.93 2.8-.5.5-1.35.864-2.8.93-1.755.077-2.772.092-6.745.092s-4.99-.015-6.745-.092c-1.45-.066-2.3-.43-2.8-.93-.5-.5-.864-1.35-.93-2.8C3.97 17.305 3.955 16.288 3.955 12.315s.015-4.99.092-6.745c.066-1.45.43-2.3.93-2.8.5-.5 1.35-.864 2.8-.93C7.325 3.97 8.342 3.956 12.315 3.956zM12.315 7.18a5.135 5.135 0 100 10.27 5.135 5.135 0 000-10.27zm0 8.315a3.18 3.18 0 110-6.36 3.18 3.18 0 010 6.36zm5.222-8.91a1.215 1.215 0 100-2.43 1.215 1.215 0 000 2.43z" clip-rule="evenodd" /></svg></a>
                <a href="https://www.facebook.com/profile.php?id=61572922405043" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-red-500 transform hover:scale-110 transition-all duration-300" title="Facebook"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd" /></svg></a>
                <a href="https://www.tiktok.com/@patagon.iart" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-red-500 transform hover:scale-110 transition-all duration-300" title="TikTok"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M12.525.02c1.31-.02 2.61-.01 3.91.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.04-5.36-.01-4.03-.01-8.05.02-12.07z"/></svg></a>
                <a href="https://www.youtube.com/@patagon-iart" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-red-500 transform hover:scale-110 transition-all duration-300" title="YouTube"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M19.812 5.418c.861.23 1.538.907 1.768 1.768C21.998 8.78 22 12 22 12s0 3.22-.42 4.814a2.506 2.506 0 0 1-1.768 1.768C18.343 19 12 19 12 19s-6.343 0-7.812-1.418a2.506 2.506 0 0 1-1.768-1.768C2 15.22 2 12 2 12s0-3.22.42-4.814a2.506 2.506 0 0 1 1.768-1.768C5.658 5 12 5 12 5s6.343 0 7.812.418zM9.545 15.568V8.432L15.818 12 9.545 15.568z" clip-rule="evenodd" /></svg></a>
            </div>

            <button id="close-pillin-modal" class="mt-4 bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-6 rounded-lg">Cerrar</button>
        </div>
    </div>


    <script type="module">
        // --- BASE DE DATOS DE CHATBOTS ---
        const chatbotInfo = {
            'chatgpt': { name: 'ChatGPT', url: 'https://chat.openai.com/' },
            'gemini': { name: 'Gemini', url: 'https://gemini.google.com/' },
            'perplexity': { name: 'Perplexity', url: 'https://www.perplexity.ai/' },
            'claude': { name: 'Claude', url: 'https://claude.ai/' },
            'meta': { name: 'Meta AI', url: 'https://www.meta.ai/' }
        };

        // --- LISTA DE PALABRAS CLAVE NO PERMITIDAS (VERSIÓN AMPLIADA Y REFORZADA) ---
        const unethicalKeywords = [
            // Español - Delitos y profesiones ilegales
            'sicario', 'asesino a sueldo', 'asesino', 'traficante', 'narcotraficante', 'proxeneta', 'contrabandista', 'estafador', 'falsificador', 'secuestrador', 'ladrón', 'ladron', 'pirata informático', 'lavador de dinero', 'extorsionador', 'terrorista', 'mafioso', 'matón', 'pandillero', 'coyote', 'trata de personas', 'dealer', 'corredor de apuestas ilegales', 'chantajista', 'embustero', 'manipulación', 'manipulacion', 'manipulador', 'corrupto', 'corrupción', 'corrupcion',
            
            // Español - Contextos médicos/técnicos ilegales
            'cirujano clandestino', 'veterinario ilegal', 'dentista sin licencia', 'químico clandestino', 'abortista ilegal', 'farmacéutico clandestino', 'curandero fraudulento', 'fabricante de drogas', 'bioingeniero sin etica',
            
            // Español - Contextos técnicos fraudulentos
            'clonador de tarjetas', 'creador de deepfakes maliciosos', 'ingeniería social', 'desarrollador de malware', 'espía digital', 'cracker', 'phreaker',
            
            // Español - Vigilancia y acoso
            'detective sin licencia', 'espía privado', 'stalker', 'paparazzi intrusivo', 'rastreador ilegal', 'escuchas ilegales',
            
            // Español - Fraude y engaño
            'vidente estafador', 'medium falso', 'abogado trucho', 'contador trucho', 'prestamista usurero', 'chamán estafador', 'gestor fantasma',
            
            // Español - Falsificación
            'documentos falsos', 'identidades falsas', 'pasaportes falsos', 'certificados falsos', 'suplantador de identidad',
            
            // Español - Explotación
            'reclutador para trata', 'fotógrafo pornográfico ilegal', 'contenido no consensuado', 'administrador de sitios de explotación', 'intermediario de menores',
            
            // Español - Actividades genéricas ilegales
            'asesor en delitos', 'consultor en hackeo', 'eliminación de huellas', 'eliminador de antecedentes', 'interrogatorio forzado', 'tortura',
            
            // Inglés - Equivalentes y términos relacionados
            'hitman', 'assassin', 'trafficker', 'drug dealer', 'pimp', 'smuggler', 'scammer', 'fraudster', 'forger', 'kidnapper', 'thief', 'hacker', 'money launderer', 'extortionist', 'terrorist', 'mobster', 'thug', 'gangster', 'human trafficking', 'bookie', 'blackmailer', 'con artist', 'manipulator', 'corrupt', 'corruption', 'unethical', 'illegal', 'plagiarism', 'plagiarize', 'weapon', 'gun', 'bomb', 'phishing', 'malware', 'virus', 'harassment', 'stalker', 'defamation', 'slander', 'violence', 'murder', 'suicide'
        ];


        // --- REFERENCIAS A ELEMENTOS DEL DOM ---
        const contextoSelect = document.getElementById('contexto');
        const trabajoFields = document.getElementById('trabajo-fields');
        const rubroInput = document.getElementById('rubro');
        const puestoInput = document.getElementById('puesto');
        const estudianteFields = document.getElementById('estudiante-fields');
        const nivelSelect = document.getElementById('nivel');
        const materiaInput = document.getElementById('materia');
        
        const generarBtn = document.getElementById('generar-btn');
        const atomContainer = document.getElementById('atom-container');
        const resultadoContainer = document.getElementById('resultado-container');
        const resultadoTexto = document.getElementById('resultado-texto');
        const resultadoLink = document.getElementById('resultado-link');
        const promptContainer = document.getElementById('prompt-container');
        const promptTexto = document.getElementById('prompt-texto');
        const copyBtn = document.getElementById('copy-btn');
        const copyFeedback = document.getElementById('copy-feedback');

        const pillinModal = document.getElementById('pillin-modal');
        const closePillinModalBtn = document.getElementById('close-pillin-modal');
        const pillinProgressBar = document.getElementById('pillin-progress-bar');


        // --- LÓGICA DE LA APLICACIÓN ---
        contextoSelect.addEventListener('change', () => {
            const seleccion = contextoSelect.value;
            trabajoFields.classList.toggle('hidden', seleccion !== 'trabajo');
            estudianteFields.classList.toggle('hidden', seleccion !== 'estudiante');
        });

        function copyTextToClipboard(text, button, feedbackElement) {
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = text;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            tempTextArea.setSelectionRange(0, 99999);
            try {
                document.execCommand('copy');
                if(button && feedbackElement) {
                    button.classList.add('hidden');
                    feedbackElement.classList.remove('hidden');
                    setTimeout(() => {
                        feedbackElement.classList.add('hidden');
                        button.classList.remove('hidden');
                    }, 2000);
                }
            } catch (err) {
                console.error('Error al copiar el texto: ', err);
            }
            document.body.removeChild(tempTextArea);
        }

        copyBtn.addEventListener('click', () => {
            copyTextToClipboard(promptTexto.textContent, copyBtn, copyFeedback);
        });

        resultadoLink.addEventListener('click', (e) => {
            copyTextToClipboard(promptTexto.textContent, null, null);
        });

        closePillinModalBtn.addEventListener('click', () => {
            pillinModal.classList.add('hidden');
            pillinModal.classList.remove('flex');
            rubroInput.value = "";
            puestoInput.value = "";
            materiaInput.value = "";
        });
        
        async function generateSuggestionWithGemini(userPrompt) {
            // =================================================================================
            // CLAVE DE API INSERTADA
            // =================================================================================
            const apiKey = "AIzaSyBPZf9TLJsMJLkfxRm1sjlDifVHhxshU98";
            
            if (apiKey === "AQUÍ_VA_TU_CLAVE_DE_API_DE_GEMINI") {
                 return {
                    sugerencia: "Error: Falta la clave de API. Por favor, edita el archivo index.html y añade tu clave de API de Gemini para que la aplicación funcione.",
                    prompt: "No se puede generar un prompt sin una clave de API válida."
                };
            }

            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
            
            const payload = {
                contents: [{
                    role: "user",
                    parts: [{ text: userPrompt }]
                }],
                generationConfig: {
                    responseMimeType: "application/json",
                    responseSchema: {
                        type: "OBJECT",
                        properties: {
                            "sugerencia": { "type": "STRING" },
                            "prompt": { "type": "STRING" }
                        },
                        required: ["sugerencia", "prompt"]
                    }
                }
            };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`Error de red: ${response.statusText}`);
                }

                const result = await response.json();
                
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const jsonText = result.candidates[0].content.parts[0].text;
                    return JSON.parse(jsonText);
                } else {
                     throw new Error("Respuesta inválida de la API de Gemini.");
                }
            } catch (error) {
                console.error("Error al llamar a la API de Gemini:", error);
                return {
                    sugerencia: "Hubo un error al contactar a la IA. Revisa la consola del navegador para más detalles. Puede que la clave de API sea incorrecta o que haya un problema de red.",
                    prompt: "Error al generar."
                };
            }
        }


        generarBtn.addEventListener('click', async () => {
            // --- INICIO DEL FILTRO DE SEGURIDAD ---
            const rubro = rubroInput.value.toLowerCase().trim();
            const puesto = puestoInput.value.toLowerCase().trim();
            const materia = materiaInput.value.toLowerCase().trim();
            const combinedInput = `${rubro} ${puesto} ${materia}`;

            const isUnethical = unethicalKeywords.some(keyword => combinedInput.includes(keyword.toLowerCase()));

            if (isUnethical) {
                pillinModal.classList.remove('hidden');
                pillinModal.classList.add('flex');
                pillinProgressBar.style.width = '0%';
                setTimeout(() => { pillinProgressBar.style.width = '100%'; }, 100);
                return; // Detiene la ejecución si se encuentra una palabra clave no ética
            }
            // --- FIN DEL FILTRO DE SEGURIDAD ---

            resultadoContainer.classList.add('hidden');
            atomContainer.classList.remove('hidden');
            generarBtn.disabled = true;
            generarBtn.innerHTML = `<div class="flex items-center justify-center"><svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Generando...</div>`;
            generarBtn.classList.add('opacity-75', 'cursor-not-allowed');

            const contexto = contextoSelect.value;
            let promptInstruction = `Eres un experto en IA que ayuda a principiantes. Genera una idea creativa y un prompt de ejemplo para alguien. Asegúrate de que la idea y el prompt sean para fines legales, éticos y constructivos. Rechaza cualquier solicitud que parezca promover actividades ilegales o no éticas. El idioma de la respuesta debe ser español. La idea debe ser práctica y útil. El prompt de ejemplo debe ser claro y listo para copiar/pegar. Responde solo con el objeto JSON estructurado con las claves 'sugerencia' y 'prompt'.`;
            
            if (contexto === 'vida-diaria') {
                promptInstruction += ` El contexto es 'Vida Diaria'. Genera una idea útil y original que no sea sobre planificación de comidas. Piensa en áreas diversas como aprender una nueva habilidad, organizar la casa, finanzas personales, creatividad, salud y bienestar, planificar eventos, o ideas para hobbies.`;
            } else if (contexto === 'trabajo') {
                promptInstruction += ` El contexto es 'Trabajo'.`;
                if (rubro) promptInstruction += ` Su industria es '${rubro}'.`;
                if (puesto) promptInstruction += ` Su rol es '${puesto}'.`;
            } else if (contexto === 'estudiante') {
                const nivel = nivelSelect.value;
                promptInstruction += ` El contexto es 'Estudiante'.`;
                if (nivel) promptInstruction += ` Su nivel es '${nivel}'.`;
                if (materia) promptInstruction += ` Estudia sobre '${materia}'.`;
            }

            const animationPromise = new Promise(resolve => setTimeout(resolve, 4000));
            const geminiPromise = generateSuggestionWithGemini(promptInstruction);

            const [_, suggestionData] = await Promise.all([animationPromise, geminiPromise]);
            
            atomContainer.classList.add('hidden');
            
            const selectedChatbotValue = document.querySelector('input[name="chatbot"]:checked').value;
            const chatbotSeleccionado = chatbotInfo[selectedChatbotValue];

            resultadoTexto.textContent = suggestionData.sugerencia;
            promptTexto.textContent = suggestionData.prompt;
            resultadoLink.href = chatbotSeleccionado.url;
            resultadoLink.textContent = `Probar en ${chatbotSeleccionado.name} →`;
            
            promptContainer.classList.remove('hidden');
            resultadoContainer.classList.remove('hidden');
            resultadoContainer.classList.add('fade-in');

            generarBtn.disabled = false;
            generarBtn.innerHTML = '✨ Generar idea con IA';
            generarBtn.classList.remove('opacity-75', 'cursor-not-allowed');
        });
    </script>
</body>
</html>
